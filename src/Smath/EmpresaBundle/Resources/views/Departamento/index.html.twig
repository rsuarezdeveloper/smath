{% extends '::base.html.twig' %}

{% block body -%}
    <div class="row">
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
            <h1 class="page-title txt-color-blueDark"><!-- PAGE HEADER --><i class="fa-fw fa fa-home"></i> Maestro de Departamentos</h1>
        </div>
    </div>

    <!-- widget grid -->
    <section id="widget-grid" class="">
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <table id="list"></table>
                <div id="pager"></div>
            </article>
            <!-- WIDGET END -->
        </div>
    </section>
    <!-- end widget grid -->
<!-- END MAIN CONTENT -->
{% endblock %}
{% block javascripts%}
<script>
    $(document).ready(function(){
        $('#list').jqGrid({
            url:'{{path('departamento_list')}}',
			datatype: "json",

            colNames: ['Id', 'C&oacute;digo', 'Nombre', 'Tel&eacute;fono', 'Compa&ntilde;&iacute;a', 'Activo', ''],
            jsonReader : {
		      root: 'rows',
		      page: 'page',
		      total: 'total',
		      records: 'records',
		      repeatitems: false,
		      //cell: "row",
		      id: 'id'
            },
            colModel: [
                {name: 'id', index:'id', jsonmap:'id', key:true, width:20, sorttype: "int", search:false, align:'center', hidden:true },
                {name: 'codigo', index:'codigo', jsonmap:"codigo", width:80,  search:true, align:'left' },
                {name: 'nombre', index:'nombre', jsonmap:'nombre', width:120,  align:'left'},
                {name: 'telefono', index:'telefono', jsonmap:'telefono', width:80, align:'left'},
                {name: 'compania', index:'compania', jsonmap:'compania', width:100},
                {name: 'estado', index:'estado', jsonmap:'estado', width:30, formatter:status, align:'center'},
                {name: 'actions', index:'id', jsonmap:'id', width: 30, align:'center', search:false, sortable:false, formatter:editar},
            ],
            /*loadComplete: function() {
				    $("tr.jqgrow:odd").css("background", "#FCF8F4");
			}*/
        });
        
        $("#list").jqGrid('filterToolbar',{stringResult: true, searchOnEnter:false, defaultSearch: 'cn'});

        function editar(cellvalue, options, rowObject){
            html = '<a href="{{path('departamento_edit', {id:'__id'})}}" role="button" class="btn btn-xs btn-default"><i class="fa fa-pencil"></i></a>'.replace('__id', cellvalue);
            return html;
        }
        
        // remove classes

        $(".ui-pg-input").attr("style","width:10px;height:20px");
        $(".ui-pg-selbox").attr("style","width:60px; height:20px; ");

        $(".ui-pg-input").attr('style','width:20px')
		$(".ui-jqgrid").removeClass("ui-widget ui-widget-content");
		$(".ui-jqgrid-view").children().removeClass("ui-widget-header ui-state-default");
		$(".ui-jqgrid-labels, .ui-search-toolbar").children().removeClass("ui-state-default ui-th-column ui-th-ltr");
		$(".ui-jqgrid-pager").removeClass("ui-state-default");
		$(".ui-jqgrid").removeClass("ui-widget-content");

		// add classes
		$(".ui-jqgrid-htable").addClass("table table-bordered table-hover");
		$(".ui-jqgrid-btable").addClass("table table-bordered table-striped");

		$(".ui-pg-div").removeClass().addClass("btn btn-sm btn-primary");
		$(".ui-icon.ui-icon-plus").removeClass().addClass("fa fa-plus");
		$(".ui-icon.ui-icon-pencil").removeClass().addClass("fa fa-pencil");
		$(".ui-icon.ui-icon-trash").removeClass().addClass("fa fa-trash-o");
		$(".ui-icon.ui-icon-search").removeClass().addClass("fa fa-search");
		$(".ui-icon.ui-icon-refresh").removeClass().addClass("fa fa-refresh");
		$(".ui-icon.ui-icon-disk").removeClass().addClass("fa fa-save").parent(".btn-primary").removeClass("btn-primary").addClass("btn-success");
		$(".ui-icon.ui-icon-cancel").removeClass().addClass("fa fa-times").parent(".btn-primary").removeClass("btn-primary").addClass("btn-danger");

		$(".ui-icon.ui-icon-seek-prev").wrap("<div class='btn btn-sm btn-default'></div>");
		$(".ui-icon.ui-icon-seek-prev").removeClass().addClass("fa fa-backward");

		$(".ui-icon.ui-icon-seek-first").wrap("<div class='btn btn-sm btn-default'></div>");
		$(".ui-icon.ui-icon-seek-first").removeClass().addClass("fa fa-fast-backward");

		$(".ui-icon.ui-icon-seek-next").wrap("<div class='btn btn-sm btn-default'></div>");
		$(".ui-icon.ui-icon-seek-next").removeClass().addClass("fa fa-forward");

		$(".ui-icon.ui-icon-seek-end").wrap("<div class='btn btn-sm btn-default'></div>");
		$(".ui-icon.ui-icon-seek-end").removeClass().addClass("fa fa-fast-forward");
});
</script>
{%endblock%}

